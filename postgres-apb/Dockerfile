FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.version"="0.1.0"
LABEL "com.redhat.apb.spec"=\
"IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj\
IyMjIyMjIyMjIyMjIyMjIyMjCiMgU2hhcmVkIFBhcmFtZXRlcnMKIyMjIyMjIyMjIyMjIyMjIyMj\
IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj\
Cl9wOiAmX3AKICAtIG5hbWU6IHBvc3RncmVzcWxfZGF0YWJhc2UKICAgIHRpdGxlOiBQb3N0Z3Jl\
U1FMIERhdGFiYXNlIE5hbWUKICAgIHR5cGU6IHN0cmluZwogICAgZGVmYXVsdDogdGVzdAogIC0g\
bmFtZTogcG9zdGdyZXNxbF9zY2hlbWEKICAgIHRpdGxlOiBQb3N0Z3JlU1FMIERhdGFiYXNlIFNj\
aGVtYSBOYW1lCiAgICB0eXBlOiBzdHJpbmcKICAgIGRlZmF1bHQ6IHB1YmxpYwogIC0gbmFtZTog\
cG9zdGdyZXNxbF9ob3N0CiAgICB0aXRsZTogUG9zdGdyZVNRTCBEYXRhYmFzZSBIb3N0CiAgICB0\
eXBlOiBzdHJpbmcKICAtIG5hbWU6IHBvc3RncmVzcWxfcG9ydAogICAgdGl0bGU6IFBvc3RncmVT\
UUwgRGF0YWJhc2UgUG9ydAogICAgdHlwZTogaW50CiAgICBkZWZhdWx0OiA1NDMyCiAgLSBuYW1l\
OiBwb3N0Z3Jlc3FsX3VzZXIKICAgIHRpdGxlOiBQb3N0Z3JlU1FMIFVzZXIKICAgIHR5cGU6IHN0\
cmluZwogICAgZGVmYXVsdDogbGVubnkKICAtIG5hbWU6IHBvc3RncmVzcWxfcGFzc3dvcmQKICAg\
IHRpdGxlOiBQb3N0Z3JlU1FMIFBhc3N3b3JkCiAgICB0eXBlOiBzdHJpbmcKICAgIGRlZmF1bHQ6\
IGxlbm9yZAojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj\
IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCnZlcnNpb246IDEuMCAgICAKbmFtZTogZXh0\
LXBvc3RncmVzLWFwYgppbWFnZTogcmFyZWRkeWFwYi9leHQtcG9zdGdyZXMtYXBiCmRlc2NyaXB0\
aW9uOiBUaGUgY29ubmVjdGlvbiBzZXJ2aWNlIHRvIGV4dGVybmFsIG9uIHByZW1pc2VzIFBvc3Rn\
cmVzIERhdGFiYXNlCmJpbmRhYmxlOiBUcnVlCnRhZ3M6CiAgLSBkYXRhYmFzZQogIC0gcmRibXMK\
ICAtIG9uX3ByZW1pc2UKYXN5bmM6IG9wdGlvbmFsCm1ldGFkYXRhOgogIGRpc3BsYXlOYW1lOiBQ\
b3N0Z3JlU1FMKE9uIFByZW1pc2UpCiAgbG9uZ0Rlc2NyaXB0aW9uOiAiQ29ubmVjdGlvbiB0byBv\
biBwcmVtaXNlcyBQb3N0Z3JlcyBEYXRhYmFzZSB3aGljaCBpcyBob3N0ZWQgb3V0c2lkZSBvZiBj\
bG91ZCAKICAgIGVudmlyb25tZW50LiBUaGlzIHdpbGwgYmUgYWNjZXNzZWQgZWl0aGVyIHRocm91\
Z2ggYSBwcm94eSBvciBWUE4gY29ubmVjdGlvbiBmb3Igc2VjdXJpdHkgcmVhc29ucyIKICBpbWFn\
ZVVybDogaHR0cHM6Ly93aWtpLnBvc3RncmVzcWwub3JnL2ltYWdlcy8zLzMwL1Bvc3RncmVTUUxf\
bG9nby4zY29sb3JzLjEyMHgxMjAucG5nIAogIGRvY3VtZW50YXRpb25Vcmw6IGh0dHBzOi8vd3d3\
LnBvc3RncmVzcWwub3JnLyAKcGxhbnM6CiAgLSBuYW1lOiBkZWZhdWx0CiAgICBkZXNjcmlwdGlv\
bjogU2VydmljZSBCcm9rZXIgZm9yIGNyZWF0aW5nIGNvbm5lY3Rpb25zIHRvIGV4dGVybmFsIFBv\
c3RncmVzIGRhdGFiYXNlCiAgICBmcmVlOiBUcnVlCiAgICBtZXRhZGF0YToKICAgICAgZGlzcGxh\
eU5hbWU6IERlZmF1bHQKICAgICAgbG9uZ0Rlc2NyaXB0aW9uOiBUaGlzIHBsYW4gZGVwbG95cyBh\
IFBvc3RncmVzIERhdGFiYXNlLCBpZiB0aGUgZGVmaW5lZCBkYXRhYmFzZSBpcyBub3QgYXZhaWxh\
YmxlIGl0IHRyaWVzIHRvIGNyZWF0ZSBvbmUuIAogICAgICBjb3N0OiAkMC4wMAogICAgcGFyYW1l\
dGVyczogKl9wCgo="

COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}

USER apb


